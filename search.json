[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "kaggle",
    "section": "",
    "text": "Kaggle成立于2010年，是一个进行数据发掘和预测竞赛的在线平台。从公司的角度来讲，可以提供一些数据，进而提出一个实际需要解决的问题；从参赛者的角度来讲，他们将组队参与项目，针对其中一个问题提出解决方案，最终由公司选出的最佳方案可以获得5K-10K美金的奖金。\n除此之外，Kaggle官方每年还会举办一次大规模的竞赛，奖金高达一百万美金，吸引了广大的数据科学爱好者参与其中。从某种角度来讲，大家可以把它理解为一个众包平台，类似国内的猪八戒。但是不同于传统的低层次劳动力需求，Kaggle一直致力于解决业界难题，因此也创造了一种全新的劳动力市场——不再以学历和工作经验作为唯一的人才评判标准，而是着眼于个人技能，为顶尖人才和公司之间搭建了一座桥梁。"
  },
  {
    "objectID": "6-mass-shoot.html",
    "href": "6-mass-shoot.html",
    "title": "6  美国大规模枪击案",
    "section": "",
    "text": "变量说明。"
  },
  {
    "objectID": "6-mass-shoot.html#描述性分析",
    "href": "6-mass-shoot.html#描述性分析",
    "title": "6  美国大规模枪击案",
    "section": "6.2 描述性分析",
    "text": "6.2 描述性分析\n\nshoot <- read_csv(\"data/Mass shooting/Mass Shootings Dataset Ver 3.csv\")\nshoot <- shoot %>% \n  rename(ID = `S#`, Open_Close = `Open/Close Location`,\n         Total = `Total victims`,\n         Mental = `Mental Health Issues`)\nshoot$Date <- as.Date(shoot$Date, \"%m/%d/%Y\")\nshoot$year <- year(shoot$Date)\nshoot <- shoot %>% \n  filter(year != 1966)\n\nglimpse(shoot)\n\nRows: 318\nColumns: 22\n$ ID                 <dbl> 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, …\n$ Title              <chr> \"Las Vegas Strip mass shooting\", \"San Francisco UPS…\n$ Location           <chr> \"Las Vegas, NV\", \"San Francisco, CA\", \"Tunkhannock,…\n$ Date               <date> 2017-10-01, 2017-06-14, 2017-06-07, 2017-06-05, 20…\n$ `Incident Area`    <chr> NA, \"UPS facility\", \"Weis grocery\", \"manufacturer F…\n$ Open_Close         <chr> NA, \"Close\", \"Close\", \"Close\", \"Close\", \"Open\", \"Cl…\n$ Target             <chr> NA, \"coworkers\", \"coworkers\", \"coworkers\", \"coworke…\n$ Cause              <chr> NA, NA, \"terrorism\", \"unemployement\", NA, \"racism\",…\n$ Summary            <chr> NA, \"Jimmy Lam, 38, fatally shot three coworkers an…\n$ Fatalities         <dbl> 58, 3, 3, 5, 3, 3, 5, 5, 3, 5, 49, 0, 1, 0, 0, 1, 4…\n$ Injured            <dbl> 527, 2, 0, 0, 0, 0, 6, 0, 3, 11, 53, 4, 4, 6, 4, 4,…\n$ Total              <dbl> 585, 5, 3, 5, 3, 3, 11, 5, 6, 16, 102, 4, 5, 6, 4, …\n$ `Policeman Killed` <dbl> NA, 0, NA, NA, 1, NA, NA, NA, 3, 5, 0, 0, 0, 0, 0, …\n$ Age                <dbl> NA, 38, 24, 45, 43, 39, 26, 20, NA, 25, 29, 0, NA, …\n$ `Employeed (Y/N)`  <dbl> NA, 1, 1, 1, 1, NA, NA, NA, NA, NA, NA, NA, NA, NA,…\n$ `Employed at`      <chr> NA, NA, \"Weis grocery\", \"manufacturer Fiamma Inc.\",…\n$ Mental             <chr> \"Unclear\", \"Yes\", \"Unclear\", \"Unclear\", \"Yes\", \"Unc…\n$ Race               <chr> \"White\", \"Asian\", \"White\", NA, \"White\", \"Black\", \"L…\n$ Gender             <chr> \"M\", \"M\", \"M\", \"M\", \"M\", \"M\", \"M\", \"M\", \"M\", \"M\", \"…\n$ Latitude           <dbl> 36.18127, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 3…\n$ Longitude          <dbl> -115.13413, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…\n$ year               <dbl> 2017, 2017, 2017, 2017, 2017, 2017, 2017, 2016, 201…\n\n\n\n6.2.1 枪击案中伤亡人数\n\n# 封装条形图作图函数\nfun_bar1 <- function(data, xlab, ylab, xname, yname){\n  data %>% \n    group_by({{xlab}}) %>% \n    summarise(count = sum({{ylab}})) %>% \n    ggplot(aes(x = reorder(year, -count),\n               y = count)) +\n      geom_bar(stat = \"identity\", fill = \"#63B8FF\") +\n      labs(x = xname, y = yname) +\n      theme_bw() +\n      theme(axis.text.x = element_text(angle = 90, vjust = 0.5))\n}\n\np1 <- fun_bar1(shoot, year, Total, \" \", \"受害人数\") +\n  geom_text(aes(label = count), size = 2, angle = 45, vjust = 0.5)\n\np2 <- fun_bar1(shoot, year, Injured, \" \", \"受伤人数\")+\n  geom_text(aes(label = count), size = 2, angle = 45, vjust = 0.5)\n\np3 <- fun_bar1(shoot, year, Fatalities, \" \", \"死亡人数\")+\n  geom_text(aes(label = count), size = 2, angle = 45, vjust = 0.5)\n\nshoot %>% \n  select(year, Injured, Fatalities) %>% \n  pivot_longer(-year,\n               names_to = \"Types\",\n               values_to = \"Values\") %>% \n  ggplot(aes(x = year,  y = Values, fill = Types)) +\n    geom_col() +\n    coord_flip() +\n    theme_bw() \n\n\n\np1/p2/p3\n\n\n\n\n\n整体而言，总伤亡人数呈现增长趋势。\n2015-2017年间，伤亡人数突然增多。\n受害人数2017年最多，1971年最少。\n除2017年外，其余年份受伤和死亡任务相对平衡\n\n\n\n6.2.2 绘制枪击案频率、伤亡总人数和平均伤亡人数（月为单位）\n\n# 提取月份数据\nshoot$month <- month(shoot$Date)\n\n# 每月枪击频率\np4 <- month_freq <- shoot %>% \n  group_by(month) %>% \n  summarise(freq = n()) %>% \n  ggplot(aes(x = reorder(month, freq), y = freq)) +\n    geom_bar(stat = \"identity\", fill = \"#63B8FF\") +\n    geom_text(aes(label = freq), hjust = -0.1, size = 2) +\n    labs(x = \" \", y = \"月均枪击事件数\") +\n    coord_flip() +\n    theme_bw()\n\n# 月伤亡总人数\np5 <- month_total <- shoot %>% \n  group_by(month) %>% \n  summarise(total = sum(Total))%>% \n  ggplot(aes(x = reorder(month, total), y = total)) +\n    geom_bar(stat = \"identity\", fill = \"#63B8FF\") +\n    geom_text(aes(label = total), hjust = -0.1, size = 2) +\n    labs(x = \" \", y = \"月伤亡总人数\") +\n    coord_flip() +\n    theme_bw()\n\n# 月均伤亡人数\np6 <- month_meantotal <- shoot %>% \n  group_by(month) %>% \n  summarise(mean = mean(Total)) %>% \n  ggplot(aes(x = reorder(month, mean), y = mean)) +\n    geom_bar(stat = \"identity\", fill = \"#63B8FF\") +\n    geom_text(aes(label = round(mean,2)), hjust = -0.1, size = 2) +\n    labs(x = \" \", y = \"月均伤亡人数\") +\n    coord_flip() +\n    theme_bw()\np4/p5/p6 \n\n\n\n\n绘制枪击案频率、伤亡总人数和平均伤亡人数（月为单位）\n\n\n\n\n\n十月份至少发生过一起大型枪击案\n\n\n\n6.2.3 枪手与种族之间的关系\n\ntable(shoot$Race)\n\n\n                                              Asian \n                                                  6 \n                                     Asian American \n                                                 11 \n                     Asian American/Some other race \n                                                  1 \n                                              black \n                                                  3 \n                                              Black \n                                                  4 \n                 Black American or African American \n                                                 76 \n         Black American or African American/Unknown \n                                                  1 \n                                             Latino \n                                                  5 \n                   Native American or Alaska Native \n                                                  3 \n                                              Other \n                                                  2 \n                                    Some other race \n                                                 20 \n                                  Two or more races \n                                                  2 \n                                            Unknown \n                                                 42 \n                                              white \n                                                 12 \n                                              White \n                                                  7 \n                White American or European American \n                                                120 \nWhite American or European American/Some other Race \n                                                  1 \n\n# 将所有重复的数据重塑为统一\nshoot <- within(shoot,{ \n  Race_new <- \" \"\n  Race_new[Race == \"Black\"|\n             Race == \"black\"|\n             Race == \"Black American or African American\"|\n             Race == \"Black American or African American/Unknown\"] <- \"Black\"\n  Race_new[Race == \"White\"|Race == \"white\"|\n             Race == \"White American or European American\"|\n             Race == \"White American or European American/Some other Race \"] <- \"White\"\n  Race_new[Race == \"unclear\"|\n             Race == \"\"|\n             Race == \"Unknown\"] <- \"Unknow\"\n  Race_new[Race == \"Asian\"|\n             Race == \"Asian American/Some other race\"|\n             Race == \"Asian American\"] <- \"Asian\"\n  Race_new[Race == \"Latino\"|Race == \"Other\"|\n             Race == \"Native American or Alaska Native\"|\n             Race == \"Native American\"|\n             Race == \"Some other race\"|\n             Race == \"Two or more races\"] <- \"Other\"\n})\n\n# 统计不同Race_new的个数\nshoot$Race_new[is.na(shoot$Race_new)] <-  \"Unknow\"\np7 <- shoot %>% \n  group_by(Race_new) %>% \n  summarise(freq = n()) %>% \n  ggplot(aes(x = reorder(Race_new, freq), y = freq)) +\n    geom_bar(stat = \"identity\", fill = \"#63B8FF\") +\n    geom_text(aes(label = round(freq, 2)), hjust = 0.7, size = 3) +\n    labs(x = \"种族\", y = \"频数\") +\n    coord_flip() +\n    theme_bw()\np8 <- shoot %>% \n  group_by(Race_new) %>% \n  summarise(freq = n()) %>% \n  ggplot(aes(x = Race_new, y = freq, fill = Race_new)) +\n    geom_bar(stat = \"identity\", width = 1) +\n    labs(x = \"种族\", y = \"频数\") +\n    coord_polar(theta = \"y\") + # 将角度映射到y轴\n    theme_bw() +\n    guides(fill = guide_legend(title = NULL))\np7|p8\n\n\n\n\n枪手与种族之间的关系\n\n\n\n\n\n枪手中白种人最多，黑种人次之，亚洲人最少。\n\n\n\n6.2.4 杀手性别和精神状况\n\n# 性别情况\ntable(shoot$Gender)\n\n\n     Female           M         M/F        Male Male/Female     Unknown \n          5          17           1         270           4          21 \n\n# 对数据进行重塑统一\nshoot$Gender[shoot$Gender == \"M\"] <- \"Male\"\nshoot$Gender[shoot$Gender == \"M/F\"] <- \"Male/Female\"\n\np9 <- shoot %>% \n  group_by(Gender) %>% \n  summarise(count = n()) %>% \n  ggplot(aes(x = reorder(Gender, count), y = count)) +\n    geom_bar(stat = \"identity\", fill = \"#63B8FF\") +\n    geom_text(aes(label = count), hjust = 0.7, size = 3) +\n    labs(x = \"性别\", y = \" \") +\n    coord_flip() +\n    theme_bw()\n\n# 精神情况\ntable(shoot$Mental)\n\n\n     No Unclear unknown Unknown     Yes \n     90      13       1     110     104 \n\nshoot$Mental[shoot$Mental == \"Unclear\"|\n               shoot$Mental == \"Unknown\"|\n               shoot$Mental == \"unknown\"] <- \"Unknown\"\n\np10 <- shoot %>% \n  group_by(Mental) %>% \n  summarise(count = n()) %>% \n  ggplot(aes(x = reorder(Mental, count), y = count)) +\n    geom_bar(stat = \"identity\", fill = \"#63B8FF\") +\n    geom_text(aes(label = count), hjust = 0.7, size = 3) +\n    labs(x = \"是否有精神问题\", y = \"频数\") +\n    coord_flip() +\n    theme_bw()\n\np9/p10\n\n\n\n\n杀手性别和精神状况\n\n\n\n\n由图@ref(fig:gender-mental)可知：\n\n枪手中男性占绝大多数。\n并不是每个枪手都有精神问题，相反有精神问题的与没有精神问题的枪手数量并未拉开差距。\n\n\n\n6.2.5 伤亡水平和不同伤亡水平伤亡人数\n\n# 按照伤亡人数确定伤亡水平\nshoot <- within(shoot,{\n  level <- \"\"\n  level[Total < 5] <- \"<5\"\n  level[Total>=5] <- \"5-10\"\n  level[Total>10] <- \">10\"\n})\n\np11 <- shoot %>% \n  group_by(level) %>% \n  summarise(count = sum(Total)) %>% \n   ggplot(aes(x = reorder(level, count), y = count)) +\n    geom_bar(stat = \"identity\", fill = \"#63B8FF\") +\n    #geom_label(aes(label = level), hjust = 0.7) +\n    labs(x = \"伤亡水平\", y = \"伤亡人数\") +\n    coord_flip() +\n    theme_bw()\n\np12 <- shoot %>% \n  group_by(level) %>% \n  summarise(count = n()) %>% \n   ggplot(aes(x = reorder(level, count), y = count)) +\n    geom_bar(stat = \"identity\", fill = \"#63B8FF\") +\n    geom_label(aes(label = count), hjust = 0.7) +\n    labs(x = \"伤亡水平\", y = \"频数\") +\n    coord_flip() +\n    theme_bw()\np12/p11\n\n\n\n\n伤亡水平和不同伤亡水平伤亡人数\n\n\n\n\n由图@ref(fig:casualties-level)可知：\n\n大部分枪击事件为伤亡人数5-10之间的小规模枪击事件。\n伤亡水平大于10的案件中总伤亡人数远多于小伤亡水平的枪击案件。"
  },
  {
    "objectID": "6-mass-shoot.html#枪击发生地的可视化地图",
    "href": "6-mass-shoot.html#枪击发生地的可视化地图",
    "title": "6  美国大规模枪击案",
    "section": "6.3 枪击发生地的可视化（地图）",
    "text": "6.3 枪击发生地的可视化（地图）\n\nstates_map <- map_data(\"state\") # 获取美国地图\np13 <- ggplot() +\n  geom_polygon(data= states_map, \n               aes(x = long, y = lat, group = group),\n               color = \"black\", fill = \"white\") +\n  geom_point(data = shoot[shoot$Longitude >= -140, ],\n             aes(x = Longitude, y = Latitude,\n             size = Total, color = Fatalities), \n             alpha = 0.6) +\n  scale_color_gradient(low = \"red\", high = \"black\")\nggplotly(p13)\n\n\n\n\n\n\n枪击案多发生在美国东部地区及西部边境地区。"
  },
  {
    "objectID": "6-mass-shoot.html#枪击案发生地点是否露天",
    "href": "6-mass-shoot.html#枪击案发生地点是否露天",
    "title": "6  美国大规模枪击案",
    "section": "6.4 枪击案发生地点（是否露天）",
    "text": "6.4 枪击案发生地点（是否露天）\n\ntable(shoot$Open_Close)\n\n\n     Close       Open Open+Close Open+CLose \n       193         76         19          1 \n\nshoot$Open_Close[is.na(shoot$Open_Close)] <- \"Unknown\"\nshoot$Open_Close[shoot$Open_Close == \"Open+CLose\"] <- \"Open+Close\"\n\nshoot_Op_Cl <- shoot %>% \n  group_by(Open_Close) %>% \n  summarise(Count = n())\n\nP14 <- ggplot(shoot_Op_Cl, aes(x = reorder(Open_Close, Count), y = Count))+\n  geom_col(fill = \"#63B8FF\") +\n  geom_label(aes(label = Count), hjust = 0.7) +\n  coord_flip()+\n  labs(x = \"Open&Close\", y = \"Count\") +\n  theme_bw()\nP14\n\n\n\n\n\n枪击案件大多发生在室内，室外枪击的数量不到室内数量的一半。"
  },
  {
    "objectID": "6-mass-shoot.html#不同枪击案起因",
    "href": "6-mass-shoot.html#不同枪击案起因",
    "title": "6  美国大规模枪击案",
    "section": "6.5 不同枪击案起因",
    "text": "6.5 不同枪击案起因\n\nshoot_cause <- shoot %>% \n  group_by(Cause) %>% \n  summarise(Count = n())\n\nshoot_cause$Cause[is.na(shoot_cause$Cause)] <- \"Unknown\"\n\n(P15 <- ggplot(shoot_cause, aes(x = reorder(Cause, Count), y = Count))+\n  geom_col(fill = \"#63B8FF\") +\n  geom_text(aes(label = Count), hjust = 0.7, size = 3) +\n  coord_flip()+\n  labs(x = \"Cause\", y = \"Count\") +\n  theme_bw())\n\n\n\n\n\n枪击案的发生大都由于枪手存在精神问题。\n恐怖主义、愤怒和挫折是除精神问题外引发枪击案最多的诱因。"
  },
  {
    "objectID": "1-vgsales.html",
    "href": "1-vgsales.html",
    "title": "1  Video Games Sales",
    "section": "",
    "text": "file <- \"D:/Tools/Rwork/0.Study R/kaggle-project/data/vgsales.csv\"\ndf <- read_csv(file)\nstr(df)\n\nspec_tbl_df [19,600 × 9] (S3: spec_tbl_df/tbl_df/tbl/data.frame)\n $ Rank         : num [1:19600] 1 2 3 4 5 6 7 8 9 10 ...\n $ Name         : chr [1:19600] \"Wii Sports\" \"Super Mario Bros.\" \"Counter-Strike: Global Offensive\" \"Mario Kart Wii\" ...\n $ Platform     : chr [1:19600] \"Wii\" \"NES\" \"PC\" \"Wii\" ...\n $ Publisher    : chr [1:19600] \"Nintendo\" \"Nintendo\" \"Valve\" \"Nintendo\" ...\n $ Developer    : chr [1:19600] \"Nintendo EAD\" \"Nintendo EAD\" \"Valve Corporation\" \"Nintendo EAD\" ...\n $ Critic_Score : num [1:19600] 7.7 10 8 8.2 8.6 10 8 9.4 9.1 8.6 ...\n $ User_Score   : num [1:19600] 8 8.2 7.5 9.1 4.7 7.8 8.8 8.8 8.1 9.2 ...\n $ Total_Shipped: num [1:19600] 82.9 40.2 40 37.3 36.6 ...\n $ Year         : num [1:19600] 2006 1985 2012 2008 2017 ...\n - attr(*, \"spec\")=\n  .. cols(\n  ..   Rank = col_double(),\n  ..   Name = col_character(),\n  ..   Platform = col_character(),\n  ..   Publisher = col_character(),\n  ..   Developer = col_character(),\n  ..   Critic_Score = col_double(),\n  ..   User_Score = col_double(),\n  ..   Total_Shipped = col_double(),\n  ..   Year = col_double()\n  .. )\n - attr(*, \"problems\")=<externalptr> \n\nhead(df, 3)\n\n# A tibble: 3 × 9\n   Rank Name  Platform Publisher Developer Critic_Score User_Score Total_Shipped\n  <dbl> <chr> <chr>    <chr>     <chr>            <dbl>      <dbl>         <dbl>\n1     1 Wii … Wii      Nintendo  Nintendo…          7.7        8            82.9\n2     2 Supe… NES      Nintendo  Nintendo…         10          8.2          40.2\n3     3 Coun… PC       Valve     Valve Co…          8          7.5          40  \n# … with 1 more variable: Year <dbl>\n\n\n数据共包括11列，包含了从1977年~2020年中的游戏销量数据，具体变量说明如下表所示：\n\ntable_var <- read_excel(\"data-intro.xlsx\", sheet = 3)\nkable(table_var, align = \"c\") %>% \n  kable_classic()\n\n\n\n \n  \n    变量 \n    说明 \n  \n \n\n  \n    Rank \n    销量排名 \n  \n  \n    Name \n    游戏名称 \n  \n  \n    Platform \n    发型平台 \n  \n  \n    Publisher \n    发行商 \n  \n  \n    Develooper \n    开发商 \n  \n  \n    Critic_Score \n    从业人评分 \n  \n  \n    User_Score \n    用户评分 \n  \n  \n    Total_shipped \n    总销量(百万套) \n  \n  \n    Year \n    发型年份"
  },
  {
    "objectID": "1-vgsales.html#缺失值处理",
    "href": "1-vgsales.html#缺失值处理",
    "title": "1  Video Games Sales",
    "section": "1.2 缺失值处理",
    "text": "1.2 缺失值处理\n\nsummary(df)\n\n      Rank           Name             Platform          Publisher        \n Min.   :    1   Length:19600       Length:19600       Length:19600      \n 1st Qu.: 4899   Class :character   Class :character   Class :character  \n Median : 9798   Mode  :character   Mode  :character   Mode  :character  \n Mean   : 9799                                                           \n 3rd Qu.:14698                                                           \n Max.   :19598                                                           \n                                                                         \n  Developer          Critic_Score      User_Score     Total_Shipped    \n Length:19600       Min.   : 0.800   Min.   : 1.000   Min.   : 0.0100  \n Class :character   1st Qu.: 6.100   1st Qu.: 6.300   1st Qu.: 0.0500  \n Mode  :character   Median : 7.300   Median : 7.200   Median : 0.1600  \n                    Mean   : 7.035   Mean   : 6.995   Mean   : 0.5511  \n                    3rd Qu.: 8.200   3rd Qu.: 8.000   3rd Qu.: 0.4600  \n                    Max.   :10.000   Max.   :10.000   Max.   :82.9000  \n                    NA's   :9631     NA's   :17377                     \n      Year     \n Min.   :1977  \n 1st Qu.:2004  \n Median :2008  \n Mean   :2008  \n 3rd Qu.:2012  \n Max.   :2020  \n               \n\nsum(is.na(df))\n\n[1] 27010\n\nn_miss(df)\n\n[1] 27010\n\n\n数据中有27010个缺失值，而缺失值主要存在与Critic_Score和User_Score，主要原因在于并不是每个用户和从业者都会对游戏进行评分。 需要对其进行一些处理，未打分的我们认为其打分为5.0分，即使用5.0代替所有缺失值。\n\n# 采用每一列的众数替换该列的缺失值\ndf <- df %>% \n  map_dfc(~replace_na(.x, rstatix::get_mode(.x)[1]))"
  },
  {
    "objectID": "1-vgsales.html#描述性分析",
    "href": "1-vgsales.html#描述性分析",
    "title": "1  Video Games Sales",
    "section": "1.3 描述性分析",
    "text": "1.3 描述性分析\n描述性统计是一个统计范围，它应用各种技术来描述和总结任何数据集，并研究观察到的数据的一般行为，以促进问题的解决。这可以通过频率表、图形和集中趋势的度量来完成，例如平均值、中位数、众数、离散度量（例如标准偏差、百分位数和四分位数）。\n\n由于2020年只有前半段的数据，我们分析时将2020年的数据剔除，以便更好的分析对比各年份的差异。同时剔除Rank列。\n\n\ndf <- df %>% \n  filter(Year != 2020) %>% \n  select(-Rank)\n\ndf$Year <- factor(df$Year)\n\n\n1.3.1 常规分析\n\n1.3.1.1 哪一年的游戏总销量最高\n\ndf_shipped <- df %>% \n  select(Year, Total_Shipped) %>% \n  group_by(Year) %>% \n  summarise(count = n()) %>% \n  arrange(desc(count))\n\np1 <- ggplot(head(df_shipped,10), aes(x = Year, y = count, \n                       fill = Year)) + \n  geom_bar(stat = \"identity\", alpha = 0.7) +\n  geom_label(aes(label = count), fontface = \"bold\",\n             fill = \"#006400\", \n             color = \"white\",\n             size = 3) +\n  theme_bw() +\n  labs(x = \" \", y = \" \") +\n  ggtitle(\"销量排名前十的年份\") +\n  theme(legend.position = \"none\", \n        plot.background = element_rect(color = \"black\", size = 1.1), \n        axis.text.x = element_text(face = \"bold\"),\n        axis.text.y = element_text(face = \"bold\"),\n        axis.title = element_text(face = \"bold\")\n        )\n\np2 <- ggplot(df_shipped, aes(x = Year, y = count, group = 1)) +\n  geom_point() +\n  geom_line() +\n  theme_bw() +\n  ggtitle(\"游戏销量变化\") +\n  labs(x = \" \", y = \" \") +\n  theme(plot.background = element_rect(color = \"black\", size = 1.1),\n        axis.text.x = element_text(face = \"bold\", angle = 90)) +\n  geom_curve(x = 40, y = 450, xend = 42, yend = 500,\n             angle = 35,\n             arrow = arrow(length = unit(0.3, \"cm\")),\n             color = \"red\") +\n  annotate(\"text\", x = 42, y = 550,  \n           label = \"COVID-19\", color = \"red\", size = 3)\np1/p2\n\n\n\n\n\n\n\n\n由图@ref(fig:shipped)可以看出：\n- 销量排名前十的年份均在21世纪，且2009年销量最高。2009年之后，游戏销量逐渐下滑，在2011年左右趋于平稳。\n\n2018~2019年，游戏销量急剧下滑。猜测原因为新冠肺炎疫情的爆发导致的游戏产能下降、经济下滑，从而大幅影响了游戏的销量。\n\n下面我们将具体看一下各游戏平台的表现。\n\n\n1.3.1.2 游戏平台排名（销量、游戏数量）\n\ndf_platform <- df %>% \n  select(Platform, Total_Shipped) %>% \n  group_by(Platform) %>% \n  summarize(amount = sum(Total_Shipped)) %>% \n  arrange(desc(amount)) %>% \n  head(10)\n\np3 <- ggplot(df_platform, aes(x = reorder(Platform, amount), y = amount, \n                                    fill = Platform)) +\n  geom_bar(stat = \"identity\", alpha = 0.7) +\n  labs(x = \" \", y = \" \") +\n  ggtitle(\"游戏平台排名\", subtitle = \"平台销量排名\") +\n  coord_flip() +\n  theme_bw() +\n  theme(legend.position = \"none\",\n        axis.text = element_text(face = \"bold\"), \n        plot.title = element_text(face = \"bold\"),\n        plot.background = element_rect(color = \"black\"))\n\ndf_platform2 <- as.data.frame(table(df$Platform)) %>% \n  rename(Platform = Var1) %>% \n  arrange(desc(Freq)) %>% \n  head(10)\n\np4 <- ggplot(df_platform2, aes(x = reorder(Platform, Freq), y = Freq, \n                         fill = Platform)) +\n  geom_bar(stat = \"identity\", alpha = 0.7) +\n  labs(x = \" \", y = \" \") +\n  ggtitle(\"游戏平台排名\", subtitle = \"平台游戏数量排名\") +\n  coord_flip() +\n  theme_bw() +\n  theme(plot.background = element_rect(color = \"black\"), \n        legend.position = \"none\",\n        plot.title = element_text(face = \"bold\"),\n        axis.text = element_text(face = \"bold\"))\np3|p4\n\n\n\n\n游戏平台排名\n\n\n\n\n由图@ref(fig:platform)可以看出：\n\nPS2不愧是有史以来最成功的的家用主机，发行在其上的游戏销量排名第一、游戏数量排名第二。\nPC游戏仍有一定竞争力。\n御三家统治了主机游戏。\n\n下面我们看一下游戏开发商的情况。\n\n\n1.3.1.3 开发商和发行商排名\n\ndf_developer <-  df %>% \n  select(Developer, Total_Shipped) %>% \n  group_by(Developer) %>% \n  summarise(amount = sum(Total_Shipped)) %>% \n  arrange(desc(amount)) %>% \n  head(10)\n\np5 <- ggplot(df_developer, aes(x = reorder(Developer, amount), y = amount,\n                         fill = Developer)) +\n  geom_bar(stat = \"identity\", alpha = 0.7) +\n  coord_flip() +\n  ggtitle(\"开发商销量排名\") +\n  labs(x = \" \", y = \"\") +\n  theme_bw() +\n  theme(legend.position = \"none\",\n        plot.background = element_rect(color = \"black\"))\n\n\ndf_publisher <- df %>% \n  select(Publisher, Total_Shipped) %>% \n  group_by(Publisher) %>% \n  summarise(amount = sum(Total_Shipped)) %>% \n  arrange(desc(amount)) %>% \n  head(10)\n\np6 <- ggplot(df_publisher, aes(x = reorder(Publisher, amount), y = amount,\n                         fill = Publisher)) +\n  geom_bar(stat = \"identity\", alpha = 0.7) +\n  coord_flip() +\n  ggtitle(\"发行商销量排名\") +\n  labs(x = \" \", y = \"\") +\n  theme_bw() +\n  theme(legend.position = \"none\",\n        plot.background = element_rect(color = \"black\"))\np5|p6\n\n\n\n\n\n任天堂作为开发商和发行商均独占鳌头。\nGame Freak依靠王牌IP精灵宝可梦占据开发商销量第三名。\n大家耳熟能详的游戏开发商和发行商均有上榜。"
  },
  {
    "objectID": "1-vgsales.html#探索性分析",
    "href": "1-vgsales.html#探索性分析",
    "title": "1  Video Games Sales",
    "section": "1.4 探索性分析",
    "text": "1.4 探索性分析\n在统计学中，探索性数据分析 (EAD) 是一种分析数据集以总结其主要特征的方法，通常使用可视化方法。\n\n1.4.1 世界最畅销游戏\n\n1.4.1.1 最畅销的5个游戏\n那么，1977年~2019年间，到底哪个游戏销量是最高的呢？\n\noptions(repr.plot.width = 20, repr.plot.height = 8)\n\ndf_games <- df %>% \n  select(Name, Total_Shipped) %>% \n  group_by(Name) %>% \n  summarise(amount = sum(Total_Shipped)) %>% \n  arrange(desc(amount)) %>% \n  head(5)\n\np7 <- ggplot(df_games, aes(x = reorder(Name, amount), y = amount,\n                     fill = Name)) +\n  geom_col(aes(alpha = 0.9)) +\n  geom_label(aes(label = amount), size = 3,\n             fontface = \"bold\",\n             color = \"white\") +\n  labs(x = \" \", y = \" \") +\n  coord_flip() +\n  theme_bw() +\n  theme(legend.position = \"none\",\n        plot.background = element_rect(color = \"black\", size = 1.1),\n        axis.text.x = element_text( face = \"bold\"),\n        axis.text.y = element_text(face = \"bold\"))\n\np8 <- ggplot(df_games, aes(x = Name, y = amount)) +\n  geom_line(alpha = 0.7, group = 1) +\n  geom_point(aes(fill = Name), shape = 2) +\n  theme_bw()+ \n  theme(legend.position = \"none\",\n        plot.background = element_rect(color = \"black\"),\n        axis.text.x = element_text(face = \"bold\")) +\n  labs(x = \"\", y = \"\") +\n  coord_polar()\np7|p8\n\n\n\n\n游戏总销量排名\n\n\n\n\n由图@ref(fig:games)可知：\n\n游戏销量排名前3的游戏为：Wii Sports、GTA5和我的世界。\nGTV5和我的世界在多个游戏平台均有发售，Wii Sports为任天堂平台独占。\n任天堂游戏平台发售的游戏占前十的大多数，任天堂就是世界的主宰！\n\n\n\n1.4.1.2 最畅销的5个游戏逐年分布\n\ndf_games_top5 <- df %>% \n  filter(Name == \"Wii Sports\" |\n         Name == \"Grand Theft Auto V\"|\n         Name == \"Minecraft\"|\n         Name == \"Super Mario Bros.\"|\n         Name == \"Counter-Strike: Global Offensive\") %>% \n  select(Name, Year, Total_Shipped)\n\nggplot(df_games_top5, aes(x = Year, y = Total_Shipped)) +\n  geom_bar(stat = \"identity\", aes(fill = Name, \n                                  color = Name),\n           alpha = 8) +\n  facet_wrap(~Name) +\n  labs(x = \"\", y = \"总销量（百万套）\") +\n  theme_bw()+\n  theme(legend.position = \"none\",\n        strip.text.x = element_text(\n          margin = margin(7, 7, 7, 7), size = 7, \n          face = \"bold\", color = \"white\"),\n        strip.background = element_rect(fill = \"#B45F04\",\n                                        color = \"black\"),\n        plot.title = element_text(face = \"bold\"),\n        axis.text.x = element_text(face = \"bold\",\n                                   angle = 90,\n                                   vjust = 0.5),\n        axis.text.y = element_text(face = \"bold\"))"
  },
  {
    "objectID": "1-vgsales.html#媒体打分与玩家打分的关系",
    "href": "1-vgsales.html#媒体打分与玩家打分的关系",
    "title": "1  Video Games Sales",
    "section": "1.5 媒体打分与玩家打分的关系",
    "text": "1.5 媒体打分与玩家打分的关系\n俗话说，“低分信媒体，高分信自己”。如果一款游戏媒体打分低，那肯定不行，但如果一个游戏媒体打高分，也不一定好玩（有可能是塞了钱）。\n下面我们就分析一下媒体打分与玩家打分的关系。\n\ndf_score <- df %>% \n  select(Name, User_Score, Critic_Score) \n\ncor <- cor.test(df_score$User_Score, df_score$Critic_Score,\n                method = \"pearson\")\np.value  <-  cor$p.value\ncoef  <- cor$estimate \n\nggplot(df_score, aes(x = User_Score, y = Critic_Score)) +\n  geom_smooth(method = lm)\n\n\n\n\n可以看到两个打分的相关系数为0.16，且p值小于0.05，表明两者呈现显著的正相关。看来游戏媒体和玩家对游戏的口味还是一样的，某种程度上说，高分也可以信媒体。"
  },
  {
    "objectID": "1-vgsales.html#玩家与媒体分别最喜欢哪个发行商",
    "href": "1-vgsales.html#玩家与媒体分别最喜欢哪个发行商",
    "title": "1  Video Games Sales",
    "section": "1.6 玩家与媒体分别最喜欢哪个发行商",
    "text": "1.6 玩家与媒体分别最喜欢哪个发行商\n\n1.6.1 玩家\n那么，玩家最喜欢（打分最高）的游戏发行商是谁呢？\n\ndf_player <- df %>% \n  select(Publisher, User_Score)\n\ndf_player$Publisher <- df_player$Publisher %>% \n  map(~\n        str_detect(.x,\"Sony\") %>% \n        ifelse(\"Sony\", .x)) %>% \n  unlist() \n\ndf_player <- df_player%>% \n  group_by(Publisher) %>% \n  summarise(count = n(),\n            mean_score = mean(User_Score)) %>% \n  filter(count >= 50) %>% \n  select(Publisher, mean_score) %>% \n  arrange(desc(mean_score))\ndf_player\n\n# A tibble: 62 × 2\n   Publisher                mean_score\n   <chr>                         <dbl>\n 1 Rockstar Games                 7.84\n 2 Microsoft Game Studios         7.77\n 3 Nintendo                       7.77\n 4 Sierra Entertainment           7.72\n 5 DreamCatcher Interactive       7.71\n 6 5pb                            7.71\n 7 Sony                           7.70\n 8 Eidos Interactive              7.70\n 9 Acclaim Entertainment          7.7 \n10 Agetec                         7.7 \n# … with 52 more rows\n\n\n在发行过50个以上游戏的老牌发行商中：\n\nR星凭借GTA、荒野大镖客等重量级IP以7.842的评分独占鳌头。\n所有发行商的评分均超过7分，说明现代游戏的质量还是有保障的。"
  }
]